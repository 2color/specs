import TerminalApp from '../components/TerminalApp'
import {
  multiSelectItemComponent,
  multiSelectIndicatorComponent,
  multiSelectCheckboxComponent,
  selectInputItemComponent,
  selectInputIndicatorComponent,
  Divider,
} from '../components/inkHelpers'
import MultiSelect from 'ink-multi-select'
import SelectInput from 'ink-select-input'
import TextInput from 'ink-text-input'
// import ProgressBar from 'ink-progress-bar'
import { Box, Text, Color } from 'ink'
import figures from 'figures'

import { Terminal, Title, Spacer, Select, Option, Button, Line, Checkbox, Success, TextInput as MockTextInput, Introspection, Command } from '../components/cli'

# MySQL

---

## Flows

<img src="https://prisma-specs.prisma.now.sh/cli/figma-proxy?id=858:190" width="100%" />

## (1) Enter Database Credentials
<TerminalApp>
  <Box flexDirection="column">
    <Text bold>Enter MySQL credentials</Text>
    <Color white>Learn how to set up a MySQL database: <Text underline>prisma.io/docs</Text></Color>
  </Box>
  <Divider />
  <Box flexDirection="column" paddingTop={1} paddingBottom={1}>
    <Text bold>We found a local MySQL database on port 3306. Do you want to use this database?</Text>
    <Box>
      <Color gray>{figures.pointer} </Color>
      <Text>Yes, autofill credentials of local MySQL database</Text>
    </Box>
  </Box>
  <Divider />
  <Box flexDirection="column" paddingTop={1} paddingBottom={1}>
    <Box marginLeft={2}>
      <Box marginRight={1}>Host:</Box>
      <TextInput value="" placeholder="127.0.0.1" />
    </Box>
    <Box marginLeft={2}>
      <Box marginRight={1}>Port:</Box>
      <TextInput value="" placeholder="3306" />
    </Box>
    <Box marginLeft={2}>
      <Box marginRight={1}>User:</Box>
      <TextInput value="" />
    </Box>
    <Box marginLeft={2}>
      <Box marginRight={1}>Password:</Box>
      <TextInput value="" />
    </Box>
    <Box marginLeft={2}>
      <Box marginRight={1}>Database (optional):</Box>
      <TextInput value="" />
    </Box>
    <Box marginTop={1}>
      <MultiSelect
        focus={false}
        items={[{ label: 'Use SSL', value: 'use-ssl' }]}
        itemComponent={multiSelectItemComponent}
        indicatorComponent={multiSelectIndicatorComponent}
        checkboxComponent={multiSelectCheckboxComponent} />
    </Box>
  </Box>
  <Divider />
  <Box flexDirection="column" paddingTop={1} paddingBottom={1}>
    <Box marginLeft={2}>
      <Box marginRight={1}>Or URL:</Box>
      <TextInput value="" placeholder="mysql://localhost:3306/admin" />
    </Box>
  </Box>
  <Divider />
  <Box>
    <Color gray>{figures.pointer} </Color>
    <Text bold>Connect</Text>
  </Box>
  <Box>
    <Color gray>❮ </Color>
    <Text bold>Back</Text>
    <Color gray> (Database selection)</Color>
  </Box>
</TerminalApp>

## (2) Choose Existing or New Database
<TerminalApp>
  <Color greenBright>
    {figures.tick} Connected to MySQL server as admin
  </Color>
  <Box flexDirection="column" marginTop={1}>
    <Text bold>Database options</Text>
    <Color white>Learn how to set up a MySQL database: <Text underline>prisma.io/docs</Text></Color>
  </Box>
  <Divider />
  <Box paddingBottom={1} paddingTop={1}>
    <Box width={40}>
      <SelectInput
        items={[
          { label: 'Create new MySQL database', value: 'new-mysql' },
          { label: 'Use existing MySQL database', value: 'existing-mysql' }
        ]}
        itemComponent={selectInputItemComponent}
        indicatorComponent={selectInputIndicatorComponent} />
    </Box>
    <Box flexDirection="column">
      <Color gray>Beginner's choice</Color>
      <Color gray>Found 5 databases</Color>
    </Box>
  </Box>
  <Divider />
  <Box>
    <Color gray>❮ </Color>
    <Text bold>Back</Text>
    <Color gray> (Database credentials)</Color>
  </Box>
</TerminalApp>

## (2.1) Set Database Name
<TerminalApp>
  <Box flexDirection="column">
    <Text bold>Database options</Text>
  </Box>
  <Divider />
  <Box marginLeft={2} paddingTop={1} paddingBottom={1}>
    <Box marginRight={1}>Enter database name:</Box>
    <TextInput value="" placeholder="my-app" />
  </Box>
  <Divider />
  <Box>
    <Color gray>{figures.pointer} </Color>
    <Text bold>Create</Text>
  </Box>
  <Box>
    <Color gray>❮ </Color>
    <Text bold>Back</Text>
    <Color gray> (Database options)</Color>
  </Box>
</TerminalApp>

## (3) Choose a Database
<TerminalApp>
  <Color greenBright>
    {figures.tick} Connected to MySQL server as admin
  </Color>
  <Box flexDirection="column" marginTop={1}>
    <Text bold>Select a MySQL database</Text>
    <Color white>Select an empty database to start a new project or introspect a non-empty one to generate your data model definition.</Color>
  </Box>
  <Box marginTop={2}>
    <Text bold>Empty databases</Text>
    <Color gray> (Start a new project)</Color>
  </Box>
  <Divider />
  <Box paddingBottom={1} paddingTop={1}>
    <Box width={25}>
      <SelectInput
        items={[{ label: 'public', value: 'public' }]}
        itemComponent={selectInputItemComponent}
        indicatorComponent={selectInputIndicatorComponent} />
    </Box>
    <Box flexDirection="column">
      <Color gray>Created a year ago</Color>
    </Box>
  </Box>
  <Box marginTop={1}>
    <Text bold>Non-empty databases</Text>
    <Color gray> (Introspect to generate initial data model)</Color>
  </Box>
  <Divider />
  <Box paddingBottom={1} paddingTop={1}>
    <Box width={25}>
      <SelectInput
        items={[
          { label: 'management', value: 'management' },
          { label: 'default$default', value: 'default' },
          { label: 'staging', value: 'staging' },
        ]}
        itemComponent={selectInputItemComponent}
        indicatorComponent={selectInputIndicatorComponent} />
    </Box>
    <Box flexDirection="column">
      <Color gray>2 tables, 1,341KB</Color>
      <Color gray>5 tables, 1,341KB</Color>
      <Color gray>1 table, 2,341KB</Color>
    </Box>
  </Box>
  <Divider />
  <Box>
    <Color gray>❮ </Color>
    <Text bold>Back</Text>
    <Color gray> (Database credentials)</Color>
  </Box>
</TerminalApp>

## (3.1) Introspection
<Terminal>
  ~/my-app prisma init
  <Spacer height={20} />
  <Introspection progress={26.5}>Introspecting <b>management</b> database...</Introspection>
  {/* <ProgressBar percent={26.5} /> */}
</Terminal>

## (3.2) Select Tools
<TerminalApp>
  <Box flexDirection="column" marginTop={1}>
    <Text bold>Which parts of Prisma do you want to use?</Text>
    <Color white>Learn more about the tools at: <Text underline>github.com/prisma/prisma2</Text></Color>
  </Box>
  <Divider />
  <Box paddingBottom={1} paddingTop={1}>
    <Box width={15}>
      <MultiSelect
        focus={false}
        items={[
          { label: 'Photon', value: 'photon' },
          { label: 'Lift', value: 'lift' },
        ]}
        itemComponent={multiSelectItemComponent}
        indicatorComponent={multiSelectIndicatorComponent}
        checkboxComponent={multiSelectCheckboxComponent} />
    </Box>
    <Box flexDirection="column">
      <Color gray>Type-safe database client</Color>
      <Color gray>Declarative data modeling & migrations</Color>
    </Box>
  </Box>
  <Divider />
  <Box>
    <Color gray>{figures.pointer} </Color>
    <Text bold>Confirm</Text>
  </Box>
</TerminalApp>

## (4) Select Language
<TerminalApp>
  <Text bold>Which programming language do you want to use?</Text>
  <Divider />
  <Box flexDirection="column" paddingBottom={1} paddingTop={1}>
    <SelectInput
      items={[
        { label: 'JavaScript', value: 'javascript' },
        { label: 'TypeScript', value: 'typescript' }
      ]}
      itemComponent={selectInputItemComponent}
      indicatorComponent={selectInputIndicatorComponent} />
    <Box marginLeft={2}>Go <Color gray>(Coming soon)</Color></Box>
  </Box>
  <Divider />
  <Box>
    <Color gray>❮ </Color>
    <Text bold>Back</Text>
    <Color gray> (Tool selection)</Color>
  </Box>
</TerminalApp>

## (4.1) Select Language for Photon (Photon)
<TerminalApp>
  <Text bold>Which programming language do you want to use to access your database with Photon?</Text>
  <Divider />
  <Box flexDirection="column" paddingBottom={1} paddingTop={1}>
    <SelectInput
      items={[
        { label: 'JavaScript', value: 'javascript' },
        { label: 'TypeScript', value: 'typescript' }
      ]}
      itemComponent={selectInputItemComponent}
      indicatorComponent={selectInputIndicatorComponent} />
    <Box marginLeft={2}>Go <Color gray>(Coming soon)</Color></Box>
  </Box>
  <Divider />
  <Box>
    <Color gray>❮ </Color>
    <Text bold>Back</Text>
    <Color gray> (Tool selection)</Color>
  </Box>
</TerminalApp>

## (4.2) Select Language for Photon (Lift+Photon)
<TerminalApp>
  <Text bold>Which programming language do you want to use to access your database with Photon?</Text>
  <Divider />
  <Box flexDirection="column" paddingBottom={1} paddingTop={1}>
    <SelectInput
      items={[
        { label: 'JavaScript', value: 'javascript' },
        { label: 'TypeScript', value: 'typescript' }
      ]}
      itemComponent={selectInputItemComponent}
      indicatorComponent={selectInputIndicatorComponent} />
    <Box marginLeft={2}>Go <Color gray>(Coming soon)</Color></Box>
  </Box>
  <Divider />
  <Box>
    <Color gray>❮ </Color>
    <Text bold>Back</Text>
    <Color gray> (Tool selection)</Color>
  </Box>
</TerminalApp>

## (5) Select Boilerplate
<TerminalApp>
  <Text bold>Do you want to use a boilerplate or explore Prisma from scratch?</Text>
  <Divider />
  <Box flexDirection="row" paddingBottom={1} paddingTop={1}>
    <Box width={25}>
      <SelectInput
        items={[
          { label: 'From scratch', value: 'scratch' },
          { label: 'GraphQL boilerplate', value: 'graphql-boilerplate' },
          { label: 'REST boilerplate', value: 'rest-boilerplate' },
          { label: 'gRPC boilerplate', value: 'grpc-boilerplate' },
          { label: 'No boilerplate', value: 'no-boilerplate' }
        ]}
        itemComponent={selectInputItemComponent}
        indicatorComponent={selectInputIndicatorComponent} />
    </Box>
    <Box flexDirection="column">
      <Color gray>Simple script with API examples</Color>
      <Color gray>GraphQL server example</Color>
      <Color gray>REST API example (using express.js)</Color>
      <Color gray>gRPC API example (client + server)</Color>
      <Color gray>Just generate the Prisma schema</Color>
    </Box>
  </Box>
  <Divider />
  <Box>
    <Color gray>❮ </Color>
    <Text bold>Back</Text>
    <Color gray> (Language selection)</Color>
  </Box>
</TerminalApp>

## (6) Success (Boilerplate)
<TerminalApp>
  <Color greenBright>
    {figures.tick} You're all set!
  </Color>
  <Box marginTop={1}>
    <Text bold>We created the following files for you:</Text>
  </Box>
  <Divider />
  <Box paddingBottom={1} paddingTop={1}>
    <Box width={25} flexDirection="column">
      <Text>schema.prisma</Text>
      <Text>main.ts</Text>
      <Text>tsconfig.json</Text>
      <Text>node_modules/</Text>
    </Box>
    <Box flexDirection="column">
      <Color gray>The datamodel describes your database schema</Color>
      <Color gray>A simple script to get you started</Color>
      <Color gray>TypeScript configuration</Color>
      <Color gray>Required Node dependencies (includes Photon)</Color>
    </Box>
  </Box>
  <Box marginTop={1}>
    <Text bold>Run the following commands to start developing</Text>
  </Box>
  <Divider />
  <Box flexDirection="column" paddingBottom={1} paddingTop={1}>
    <Box>
      <Color gray>$ </Color>
      <Text>cd hello-world</Text>
    </Box>
    <Box>
      <Color gray>$ </Color>
      <Text>prisma dev</Text>
    </Box>
  </Box>
  <Color gray>Learn more about using Photon and Lift at <Text underline>prisma.io/docs/</Text></Color>
</TerminalApp>

## (M.6.1) Success (Photon)
## (M.6.2) Success (Lift+Photon)
## (M.6.3) Success (Lift)